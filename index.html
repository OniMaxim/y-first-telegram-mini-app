<script>
        // Сообщаем Telegram, что наше веб-приложение готово
        if (typeof Telegram !== 'undefined' && typeof Telegram.WebApp !== 'undefined') {
            Telegram.WebApp.ready();
        } else {
            // Это сообщение можно оставить, если хочешь видеть его при открытии в обычном браузере
            // console.log('ПРЕДУПРЕЖДЕНИЕ: Объект Telegram.WebApp НЕ найден. Это нормально, если страница открыта НЕ ВНУТРИ Telegram.');
        }

        // --- Логика для кнопки "Нажми меня" и абзаца (старый код) ---
        const myHtmlButton = document.getElementById('myHtmlButton');
        const message = document.getElementById('messageParagraph');

        if(myHtmlButton && message){
            myHtmlButton.addEventListener('click', function() {
                message.textContent = 'Миу! Люблю тебя!';
            });
        }

        // --- КОД ДЛЯ ИГРЫ "ЛОПАЙ ШАРИКИ" ---
        const bubbles = document.querySelectorAll('.bubble');
        const resetButton = document.getElementById('resetButton');

        function popBubble(bubbleElement) {
            if (!bubbleElement.classList.contains('popped')) {
                bubbleElement.classList.add('popped');
                bubbleElement.textContent = 'Чпок!';
            }
        }

        function resetAllBubbles() {
            if (bubbles) {
                bubbles.forEach(function(bubble) {
                    bubble.classList.remove('popped');
                    bubble.textContent = '';
                });
            }
        }

        if (bubbles && bubbles.length > 0) {
            bubbles.forEach(function(bubble) { // Убрал index, он был для отладочного alert
                bubble.addEventListener('click', function() {
                    // alert('Шарик #' + (index + 1) + ' нажат!'); // <-- УБИРАЕМ ЭТОТ ALERT
                    popBubble(bubble);
                });
            });
        }

        if (resetButton) {
            resetButton.addEventListener('click', function() {
                // alert('Кнопка "Новая упаковка" нажата!'); // <-- УБИРАЕМ ЭТОТ ALERT
                resetAllBubbles();
            });
        }

        // --- КОД ДЛЯ TELEGRAM MAINBUTTON (для закрытия приложения) ---
        if (typeof Telegram !== 'undefined' && typeof Telegram.WebApp !== 'undefined') {
            Telegram.WebApp.MainButton.show();
            Telegram.WebApp.MainButton.setText('Закрыть игру');
            Telegram.WebApp.MainButton.onClick(function() {
                Telegram.WebApp.close();
            });
        }
    </script>